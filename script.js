const quizData = [
    {
        quizId: 'section1',
        sectionTitle: 'Section 1: Tenses',
        questions: [
            {
                question: "I ___ to the market yesterday.",
                options: ["go", "went", "gone", "going"],
                answer: "went"
            },
            {
                question: "She ___ a book now.",
                options: ["is reading", "reads", "read", "was reading"],
                answer: "is reading"
            },
            {
                question: "They ___ football every Sunday.",
                options: ["play", "are playing", "played", "will play"],
                answer: "play"
            },
             {
                question: "He ___ his homework before dinner.",
                options: ["finish", "finished", "has finished", "is finishing"],
                answer: "has finished"
            },
           {
                 question: "We ___ to the park later.",
                options: ["go", "are going", "went", "will go"],
                 answer: "will go"
            },
             {
                question: "The train ___ at 10 AM sharp.",
                options: ["leaves", "is leaving", "left", "was leaving"],
                answer: "leaves"
            },
            {
                 question: "By next year, she ___ finished her studies.",
                 options: ["will have", "has", "will be", "had"],
                  answer: "will have"
            },
             {
                 question: "She ___ in this school for five years.",
                options: ["is studying", "has been studying", "studied", "was studying"],
                 answer: "has been studying"
            },
             {
                 question: "They ___ for the competition all week.",
                  options: ["practice", "practiced", "have been practicing", "will practice"],
                 answer: "have been practicing"
            },
            {
                 question: "He ___ the movie before I arrived.",
                 options: ["watched", "was watching", "had watched", "is watching"],
                 answer: "had watched"
            },
            {
                question: "I _____ my grandparents next summer.",
                 options: ["will visit", "visit", "am visiting", "visited"],
                  answer: "will visit"
            },
             {
                 question: "The cat ___ under the table when I saw it.",
                 options: ["sleeps", "was sleeping", "slept", "had slept"],
                  answer: "was sleeping"
             },
            {
                 question: "He ___ hard to succeed.",
                 options: ["is working", "worked", "has been working", "will work"],
                  answer: "is working"
            },
             {
                 question: "The birds ___ when the sun rises.",
                options: ["sing", "are singing", "sang", "have sung"],
                 answer: "sing"
            },
            {
                 question: "They ___ a new car last month.",
                 options: ["buy", "bought", "are buying", "will buy"],
                  answer: "bought"
            },
             {
                 question: "I ___ the exam by next week.",
                options: ["will finish", "will have finished", "am finishing", "finished"],
                 answer: "will have finished"
            },
            {
                 question: "The baby ___ all day.",
                 options: ["cries", "is crying", "cried", "had cried"],
                 answer: "is crying"
            },
             {
                  question: "She ___ her tea when the phone rang.",
                  options: ["drank", "was drinking", "has drunk", "is drinking"],
                  answer: "was drinking"
             },
            {
                 question: "He ___ to the gym daily for two years.",
                  options: ["goes", "went", "has gone", "has been going"],
                 answer: "has been going"
            },
             {
                  question: "By the time we arrive, they ___ eaten.",
                 options: ["will eat", "have eaten", "will have eaten", "are eating"],
                  answer: "will have eaten"
             },
            {
                 question: "She ___ to dance class after school.",
                 options: ["goes", "is going", "went", "has gone"],
                 answer: "goes"
            },
             {
                  question: "The movie ___ when we reached the theater.",
                 options: ["starts", "started", "was starting", "had started"],
                  answer: "had started"
            },
             {
                 question: "They ___ for a new house.",
                 options: ["look", "are looking", "looked", "have looked"],
                  answer: "are looking"
            },
            {
                question: "I ___ the book before you recommended it.",
                 options: ["read", "was reading", "had read", "am reading"],
                 answer: "had read"
            },
            {
                question: "He ___ a successful business by now.",
                 options: ["builds", "is building", "has built", "built"],
                 answer: "has built"
            }
             ,
            {
                 question: "The sun ___ in the East.",
                 options: ["rise", "rises", "rose", "rising"],
                 answer: "rises"
            }
        ]
    },
    {
        quizId: 'section2',
        sectionTitle: 'Section 2: Subject-Verb Agreement',
        questions: [
             {
                 question: "The dog ___ barking loudly.",
                 options: ["is", "are", "were", "be"],
                 answer: "is"
            },
             {
                question: "My friends ___ coming to the party.",
                 options: ["is", "are", "was", "were"],
                  answer: "are"
            },
            {
                 question: "Each of the students ___ a book.",
                options: ["have", "has", "are", "is"],
                answer: "has"
            },
             {
                 question: "Neither the cat nor the dogs ___ happy.",
                options: ["is", "are", "was", "were"],
                 answer: "are"
            },
            {
                question: "The news ___ very interesting.",
                 options: ["is", "are", "were", "be"],
                 answer: "is"
            },
             {
                 question: "Mathematics ___ my favorite subject.",
                 options: ["are", "is", "were", "be"],
                answer: "is"
            },
            {
                 question: "She and her sister ___ going to the market.",
                options: ["is", "are", "were", "was"],
                answer: "are"
            },
             {
                  question: "Either he or I ___ going to drive.",
                 options: ["am", "is", "are", "were"],
                  answer: "am"
            },
             {
                 question: "The quality of the apples ___ poor.",
                 options: ["is", "are", "were", "be"],
                 answer: "is"
            },
             {
                  question: "Many people ___ coming to the event.",
                options: ["is", "are", "were", "be"],
                  answer: "are"
            },
            {
                 question: "The group of dancers ___ practicing hard.",
                 options: ["are", "is", "was", "were"],
                 answer: "is"
             },
             {
                question: "Every boy and girl ___ present in the class.",
                options: ["are", "is", "was", "were"],
                answer: "is"
             },
             {
                question: "Half of the pizza ___ been eaten.",
                options: ["has", "have", "are", "is"],
                answer: "has"
            },
             {
                  question: "Some of the cookies ___ missing.",
                  options: ["is", "are", "was", "were"],
                 answer: "are"
            },
             {
                  question: "His knowledge of languages ___ impressive.",
                  options: ["is", "are", "were", "be"],
                  answer: "is"
            },
             {
                  question: "The team ___ playing very well today.",
                 options: ["is", "are", "were", "be"],
                 answer: "is"
            },
            {
                 question: "The pair of shoes ___ in the corner.",
                options: ["is", "are", "was", "were"],
                 answer: "is"
            },
             {
                  question: "A number of students ___ selected for the program.",
                  options: ["is", "are", "was", "were"],
                  answer: "are"
            },
            {
                 question: "The committee ___ divided in their opinion.",
                 options: ["is", "are", "was", "were"],
                 answer: "are"
            },
             {
                 question: "All the money ___ spent.",
                  options: ["has", "have", "is", "are"],
                  answer: "has"
             },
            {
                 question: "One of the reasons ___ his poor health.",
                 options: ["is", "are", "was", "were"],
                 answer: "is"
            },
             {
                  question: "Both of my parents ___ teachers.",
                 options: ["is", "are", "was", "were"],
                 answer: "are"
             },
             {
                 question: "The level of the water ___ rising.",
                options: ["is", "are", "was", "were"],
                answer: "is"
            },
             {
                 question: "My family ___ happy with my decision.",
                 options: ["is", "are", "was", "were"],
                answer: "is"
            },
           {
                question: "The director and producer ___ coming.",
                options: ["is", "are", "was", "were"],
                 answer: "are"
           },
           {
            question: "The book along with its pages ____ torn",
              options: ["is", "are", "was", "were"],
              answer: "is"
          }
        ]
     },
    {
        quizId: 'section3',
        sectionTitle: 'Section 3: Passive Voice',
          questions: [
            {
              question: "The cat caught the mouse. (Change to passive)",
               options: ["The mouse was caught by the cat.", "The mouse is caught by the cat.", "The mouse has caught by the cat.", "The mouse was been caught by the cat."],
               answer: "The mouse was caught by the cat."
            },
            {
                question: "They are building a new bridge. (Change to passive)",
                options: ["A new bridge is being built by them.", "A new bridge was being built by them.", "A new bridge has built by them.", "A new bridge was build by them."],
                answer: "A new bridge is being built by them."
            },
           {
               question: "She has written a letter. (Change to passive)",
               options: ["A letter has been written by her.", "A letter is written by her.", "A letter was written by her.", "A letter had been written by her."],
               answer: "A letter has been written by her."
           },
            {
               question: "The police will arrest the thief. (Change to passive)",
               options: ["The thief will be arrested by the police.", "The thief was arrested by the police.", "The thief is arrested by the police.", "The thief will been arrested by the police."],
               answer: "The thief will be arrested by the police."
            },
            {
              question: "The students were singing a song. (Change to passive)",
              options: ["A song was being sung by the students.", "A song is sung by the students.", "A song has sung by the students.", "A song was sung by the students."],
              answer: "A song was being sung by the students."
           },
           {
                question: "The teacher explained the lesson. (Change to passive)",
               options: ["The lesson was explained by the teacher.", "The lesson is explained by the teacher.", "The lesson was being explained by the teacher.", "The lesson had been explained by the teacher."],
               answer: "The lesson was explained by the teacher."
            },
            {
                question: "They have painted the house. (Change to passive)",
                options: ["The house has been painted by them.", "The house was painted by them.", "The house is painted by them.", "The house had been painted by them."],
                answer: "The house has been painted by them."
            },
             {
                question: "Someone stole my car. (Change to passive)",
                options: ["My car was stolen.", "My car is stolen.", "My car has been stolen.", "My car was being stolen."],
                answer: "My car was stolen."
             },
            {
                question: "The company is launching a new product. (Change to passive)",
                options: ["A new product is being launched by the company.", "A new product was launched by the company.", "A new product has been launched by the company.", "A new product is launch by the company."],
                answer: "A new product is being launched by the company."
            },
            {
                 question: "She will deliver the package. (Change to passive)",
                 options: ["The package will be delivered by her.", "The package was delivered by her.", "The package has been delivered by her.", "The package was being delivered by her."],
                 answer: "The package will be delivered by her."
            },
             {
               question: "The chef prepared the meal. (Change to passive)",
              options: ["The meal was prepared by the chef.", "The meal is prepared by the chef.", "The meal had been prepared by the chef.", "The meal was being prepared by the chef."],
              answer: "The meal was prepared by the chef."
           },
           {
                question: "The rain damaged the crops. (Change to passive)",
                options: ["The crops were damaged by the rain.", "The crops are damaged by the rain.", "The crops have damaged by the rain.", "The crops were being damaged by the rain."],
                answer: "The crops were damaged by the rain."
            },
             {
                question: "The children have eaten all the cookies. (Change to passive)",
                options: ["All the cookies have been eaten by the children.", "All the cookies were eaten by the children.", "All the cookies are eaten by the children.", "All the cookies had been eaten by the children."],
                answer: "All the cookies have been eaten by the children."
            },
            {
               question: "The gardener is watering the plants. (Change to passive)",
               options: ["The plants are being watered by the gardener.", "The plants were watered by the gardener.", "The plants have been watered by the gardener.", "The plants is watered by the gardener."],
               answer: "The plants are being watered by the gardener."
           },
           {
                 question: "He wrote the novel. (Change to passive)",
                 options: ["The novel was written by him.", "The novel is written by him.", "The novel had been written by him.", "The novel was being written by him."],
                 answer: "The novel was written by him."
           },
           {
                 question: "They will announce the results soon.(Change to passive)",
                  options: ["The results will be announced soon.", "The results was announced soon.", "The results are announced soon.", "The results have been announced soon."],
                  answer: "The results will be announced soon."
            },
           {
                question: "The wind blew down the tree.(Change to passive)",
                options: ["The tree was blown down by the wind.", "The tree is blown down by the wind.", "The tree had blown down by the wind.", "The tree was being blown down by the wind."],
                 answer: "The tree was blown down by the wind."
           },
            {
               question: "She is reading the book.(Change to passive)",
                options: ["The book is being read by her.", "The book was read by her.", "The book has been read by her.", "The book is read by her."],
                answer: "The book is being read by her."
            },
            {
                 question: "They had finished the project. (Change to passive)",
                options: ["The project had been finished by them.", "The project was finished by them.", "The project is finished by them.", "The project has been finished by them."],
                answer: "The project had been finished by them."
            },
           {
                question: "The company released the report.(Change to passive)",
                options: ["The report was released by the company.", "The report is released by the company.", "The report had released by the company.", "The report was being released by the company."],
                 answer: "The report was released by the company."
             },
           {
               question: "She is learning English. (Change to passive)",
               options: ["English is being learned by her.", "English was learned by her.", "English has learned by her.", "English is learn by her."],
                answer: "English is being learned by her."
           },
             {
               question: "The mechanic repaired the car. (Change to passive)",
               options: ["The car was repaired by the mechanic.", "The car is repaired by the mechanic.", "The car was being repaired by the mechanic.", "The car has been repaired by the mechanic."],
               answer: "The car was repaired by the mechanic."
           },
           {
               question: "The team will celebrate the victory. (Change to passive)",
                options: ["The victory will be celebrated by the team.", "The victory was celebrated by the team.", "The victory is celebrated by the team.", "The victory has been celebrated by the team."],
                answer: "The victory will be celebrated by the team."
            },
            {
                question: "They are watching the match. (Change to passive)",
                options: ["The match is being watched by them.", "The match was watched by them.", "The match has been watched by them.", "The match is watch by them."],
                answer: "The match is being watched by them."
             },
             {
                question: "The students submitted their assignments. (Change to passive)",
                options: ["The assignments were submitted by the students.", "The assignments are submitted by the students.", "The assignments has been submitted by the students.", "The assignments was submitted by the students."],
                 answer: "The assignments were submitted by the students."
           }
        ]
     },
     {
        quizId: 'section5',
        sectionTitle: 'Section 4: Question Tags',
        questions: [
            {
               question: "You are coming, ____?",
              options: ["aren't you", "are you", "isn't it", "is it"],
               answer: "aren't you"
           },
            {
              question: "She can swim, ____?",
              options: ["can she", "can't she", "is she", "isn't she"],
              answer: "can't she"
            },
           {
                question: "They have finished, ____?",
                options: ["have they", "haven't they", "has they", "hasn't they"],
                answer: "haven't they"
            },
            {
              question: "He is a doctor, ____?",
              options: ["is he", "isn't he", "are he", "aren't he"],
              answer: "isn't he"
            },
             {
               question: "We will go, ____?",
               options: ["will we", "won't we", "shall we", "shan't we"],
                answer: "won't we"
           },
           {
                question: "It is raining, ____?",
                options: ["is it", "isn't it", "are it", "aren't it"],
                answer: "isn't it"
            },
             {
               question: "They were playing, ____?",
               options: ["were they", "weren't they", "was they", "wasn't they"],
                answer: "weren't they"
           },
           {
                 question: "You have been there, ____?",
                 options: ["have you", "haven't you", "has you", "hasn't you"],
                 answer: "haven't you"
           },
          {
                question: "He doesn't like coffee, ____?",
                options: ["does he", "doesn't he", "is he", "isn't he"],
               answer: "does he"
           },
           {
                question: "She went to the store, ____?",
               options: ["did she", "didn't she", "does she", "doesn't she"],
               answer: "didn't she"
            },
            {
              question: "We should help them, ____?",
              options: ["should we", "shouldn't we", "do we", "don't we"],
               answer: "shouldn't we"
            },
            {
                 question: "It will be fine, ____?",
                options: ["will it", "won't it", "shall it", "shan't it"],
               answer: "won't it"
            },
            {
                question: "They are happy, ____?",
                options: ["are they", "aren't they", "is they", "isn't they"],
                 answer: "aren't they"
            },
           {
               question: "She has eaten, ____?",
                options: ["has she", "hasn't she", "does she", "doesn't she"],
               answer: "hasn't she"
           },
           {
                 question: "You were late, ____?",
                options: ["were you", "weren't you", "was you", "wasn't you"],
               answer: "weren't you"
            },
           {
                question: "He can speak English, ____?",
               options: ["can he", "can't he", "is he", "isn't he"],
               answer: "can't he"
            },
            {
               question: "They have been waiting, ____?",
                options: ["have they", "haven't they", "has they", "hasn't they"],
               answer: "haven't they"
           },
            {
                 question: "It is not easy, ____?",
                 options: ["is it", "isn't it", "are it", "aren't it"],
                answer: "is it"
            },
           {
                 question: "We were not sleeping, ____?",
               options: ["were we", "weren't we", "was we", "wasn't we"],
              answer: "were we"
           },
           {
                question: "You will be there, ____?",
                options: ["will you", "won't you", "shall you", "shan't you"],
                answer: "won't you"
            },
            {
                question: "She cooks well, ____?",
               options: ["does she", "doesn't she", "is she", "isn't she"],
                answer: "doesn't she"
            },
            {
                question: "They played the match, ____?",
                options: ["did they", "didn't they", "do they", "don't they"],
                 answer: "didn't they"
            },
             {
                question: "He is not coming today, _____?",
                options: ["is he", "isn't he", "are he", "aren't he"],
                answer: "is he"
            },
            {
              question: "The birds were flying, _____?",
               options: ["were they", "weren't they", "was they", "wasn't they"],
               answer: "weren't they"
           },
          {
                question: "He has a car,____?",
                options: ["has he", "hasn't he", "does he", "doesn't he"],
                answer: "doesn't he"
          }
        ]
     }
];

const quizContainer = document.getElementById('quiz-container');
const sectionButtons = document.getElementById('section-buttons');

let userAnswers = {}; // Object to store answers for each quiz

function renderSectionButtons() {
    quizData.forEach((section) => {
        const button = document.createElement('button');
        button.textContent = section.sectionTitle;
        button.addEventListener('click', () => showQuizSection(section.quizId));
        sectionButtons.appendChild(button);
    });
}

function showQuizSection(quizId) {
    // Hide all quiz sections
    quizContainer.innerHTML = "";
    const sectionDiv = document.createElement('div');
    sectionDiv.classList.add('quiz-section','active');
        const currentQuizData =  quizData.find(data => data.quizId === quizId);

       const sectionTitle = document.createElement('h2');
       sectionTitle.textContent = currentQuizData.sectionTitle;
       sectionDiv.appendChild(sectionTitle);

       currentQuizData.questions.forEach((question, questionIndex) => {
         const questionDiv = document.createElement('div');
         questionDiv.classList.add('question');

         const questionText = document.createElement('p');
         questionText.textContent = `${questionIndex + 1}. ${question.question}`;
         questionDiv.appendChild(questionText);

        question.options.forEach((option, optionIndex) => {
            const label = document.createElement('label');
            const radioBtn = document.createElement('input');
            radioBtn.type = 'radio';
            radioBtn.name = `${quizId}-question${questionIndex}`;
            radioBtn.value = option;
            radioBtn.id = `${quizId}-question${questionIndex}-option${optionIndex}`
             label.appendChild(radioBtn);
             label.innerHTML += option;
             questionDiv.appendChild(label);

        });

         sectionDiv.appendChild(questionDiv);
    });

       const submitButton = document.createElement('button');
       submitButton.textContent = `Submit `;
       submitButton.addEventListener('click', () => submitQuiz(quizId));
        sectionDiv.appendChild(submitButton);
        const resultsDiv = document.createElement('div');
        resultsDiv.classList.add('results');
        resultsDiv.id = `results-${quizId}`
        sectionDiv.appendChild(resultsDiv);
         const tryAgainButton = document.createElement('button');
        tryAgainButton.textContent = "Try Again";
        tryAgainButton.style.display = "none"
        tryAgainButton.addEventListener('click', () => tryAgain(quizId));
        sectionDiv.appendChild(tryAgainButton);

    quizContainer.appendChild(sectionDiv);
}



function submitQuiz(quizId) {
    let score = 0;
    const sectionUserAnswers = [];
    const currentQuizData = quizData.find(data => data.quizId === quizId)

     currentQuizData.questions.forEach((question, questionIndex) => {
            const selectedOption = document.querySelector(`input[name="${quizId}-question${questionIndex}"]:checked`);
             if(selectedOption){
                 sectionUserAnswers.push({question:questionIndex, answer: selectedOption.value });
                    if(selectedOption.value === question.answer)
                    {
                         score++;
                     }
             } else {
                    sectionUserAnswers.push({question:questionIndex, answer: null });
                 }
        });
    userAnswers[quizId] = sectionUserAnswers;
    displayResults(score, quizId);
     const sectionDiv = document.querySelector(`#quiz-container .quiz-section`);
    const submitButton = sectionDiv.querySelector('button');
    submitButton.disabled = true;

     const tryAgainButton = document.querySelector(`#quiz-container button:last-child`);
    tryAgainButton.style.display = "block";

}

function displayResults(score, quizId) {
    const currentQuizData = quizData.find(data => data.quizId === quizId);
    const resultsDiv = document.getElementById(`results-${quizId}`);
    let resultsHTML = `<h2>Your Score: ${score} / ${currentQuizData.questions.length}</h2>`;

    const sectionUserAnswers = userAnswers[quizId];
    sectionUserAnswers.forEach(userAnswer => {
        const question = currentQuizData.questions[userAnswer.question];
        const answerColor = userAnswer.answer === question.answer ? 'green' : 'red';
        resultsHTML += `<p><strong>Question ${userAnswer.question + 1}:</strong><br>${question.question}<br>
        Your Answer: <span style="color:${answerColor}">${userAnswer.answer ? userAnswer.answer : 'Not Answered'}</span> <br>
        Correct Answer: <span style="color:green">${question.answer}</span>
        </p>`;
    });

    resultsDiv.innerHTML = resultsHTML;
}

function tryAgain(quizId){
      const resultsDiv = document.getElementById(`results-${quizId}`);
    resultsDiv.innerHTML = '';

     const sectionDiv = document.querySelector(`#quiz-container .quiz-section`);
    const tryAgainButton = sectionDiv.querySelector('button:last-child');
    tryAgainButton.style.display = "none";

    const submitButton = sectionDiv.querySelector('button');
     submitButton.disabled = false;
     const currentQuizData = quizData.find(data => data.quizId === quizId);
     currentQuizData.questions.forEach((question, questionIndex) => {
         const radioBtn = document.querySelectorAll(`input[name="${quizId}-question${questionIndex}"]`);
            radioBtn.forEach(input => input.checked = false);
     })
}


renderSectionButtons();